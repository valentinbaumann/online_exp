<!DOCTYPE html>

<html lang="de">

<head>

  <meta charset="UTF-8"/>
  
  <!-- name of experiment -->
  <title>online_test_Day2</title>  
  
  <!-- loads jspsych plugins (offline) -->
  <script type="text/javascript" src="jspsych-6.0.5/jspsych.js"></script>
  <link rel="stylesheet" type="text/css" href="jspsych-6.0.5/css/jspsych.css"/>
  <script type="text/javascript" src="jspsych-6.0.5/plugins/jspsych-html-keyboard-response.js"></script>
  <script type="text/javascript" src="jspsych-6.0.5/plugins/jspsych-image-keyboard-response.js"></script>
	<script type="text/javascript" src="jspsych-6.0.5/plugins/jspsych-html-button-response.js"></script>
	<script type="text/javascript" src="jspsych-6.0.5/plugins/jspsych-fullscreen.js"></script>
  <script src="jspsych-6.0.5/plugins/jspsych-survey-text.js"></script> 

</head>



<!-- this is the Javascript section -->
<script>
  

	///////////////////////////////////////////////////////
	// define variables


	// create timeline
	var timeline = [];

	var console_test = "go console!";
	console.log(console_test);
  
	// recognition list 
	var words_recognition= [
		{word: 'MÄDCHEN', data: {trial_code: 'recognition',  property: "old"}},
		{word: 'RAUPE', data: {trial_code: 'recognition',  property: "old"}},
		{word: 'BAUM', data: {trial_code: 'recognition', property: "old"}},
		{word: 'GABEL', data: {trial_code: 'recognition', property: "old"}},
		{word: 'RADIO', data: {trial_code: 'recognition', property: "old"}},
		{word: 'BROT', data: {trial_code: 'recognition', property: "old"}},
		{word: 'KOMPASS', data: {trial_code: 'recognition', property: "new"}},
		{word: 'BAHN', data: {trial_code: 'recognition', property: "new"}},
		{word: 'HEIZUNG', data: {trial_code: 'recognition', property: "new"}},
		{word: 'TIGER', data: {trial_code: 'recognition', property: "new"}},
		{word: 'HALS', data: {trial_code: 'recognition', property: "new"}},
		{word: 'SAND', data: {trial_code: 'recognition', property: "new"}},
	];
	
	
	
	// create fixation trial
	var fixation_trial = {
		type: 'html-keyboard-response',
    stimulus: '<div style="font-size:60px;">+</div>',
    choices: jsPsych.NO_KEYS,
		trial_duration: 1500,
		post_trial_gap: 0,
		data: {trial_code: 'fixation'}
    }

	// create recognition trial	
	var recognition_trial = {
        type: 'html-keyboard-response',
				stimulus: jsPsych.timelineVariable('word'),
        choices: ['y','n'],
        post_trial_gap: 0,
				data: jsPsych.timelineVariable('data'),
				/*
				on_finish: function(data){
          if(data.word_validity == 'old'){
            var correct = data.key_press == jsPsych.pluginAPI.convertKeyCharacterToKeyCode('y');
          } else {
            var correct = data.key_press == jsPsych.pluginAPI.convertKeyCharacterToKeyCode('n');
          }
          jsPsych.data.addDataToLastTrial({correct: correct});
				}
				*/
  };


	///////////////////////////////////////////////////////
	// define trials

	var fullscreen_trial = {
		type: 'fullscreen',
		message: '',
		button_label: ['Start and enter fullscreen mode'],
		fullscreen_mode: true,
	}
	timeline.push(fullscreen_trial);

	// welcome instruction
	var welcome_instruction_trial = {
		type: 'html-button-response',
		stimulus: '<p> Willkommen! <br> <br> Ankas & Lindas Masterarbeit Tag 2 </p>',
		choices: ['Los!']
	};
	timeline.push(welcome_instruction_trial);

 	// subject ID
	var subject_id_trial = {
		type: 'survey-text',
		questions: [{prompt: "Bitte gib deinen persönlichen Probandencode ein:"}],
	};
	timeline.push(subject_id_trial); 
 
	// expectation check
	var survey_expectation_trial = {
		type: 'survey-text',
		questions: [{prompt: "Was denkst du wird heute deine Aufgabe sein?", rows: 5, columns: 60},],
	};
	timeline.push(survey_expectation_trial); 

	// expectation check
	var survey_sleep_trial = {
		type: 'survey-text',
		questions: [{prompt: "Wie viele Stunden hast du in der letzten Nacht geschlafen?", rows: 1, columns: 1},],
	};
	timeline.push(survey_sleep_trial); 

	// recall instruction
	var recall_instruction_trial = {		
		type: 'html-button-response',
		stimulus: '<p> In der dieser Aufgabe sollst du dich an alle Wörter zu erinnern, die du gerade gesehen hast. Versuche dich auch an die Wörter zu erinnern, die du nicht ausdrücklich lernen solltest! </p>' + '<p> </p>',
		choices: ['Los!']
		};
		timeline.push(recall_instruction_trial);

	// recall task
	var recall_trial = {		
		type: 'survey-text',
		questions: [{prompt: "Bitte notiere alle Wörter, an die du dich noch erinnern kannst. Schreibe dabei jedes Wort in eine neue Zeile und achte darauf, dass es richtig geschrieben ist.", rows: 20, columns: 40}],
		};
	timeline.push(recall_trial); 

	// recognition instruction 
	var recognition_instruction_trial = {
		type: 'html-button-response',
		stimulus: '<p> Nächste Aufgabe: Wiedererkennen </p>' + '<p> Dir werden nacheinander die Worte von gestern, aber auch neue Worte gezeigt.</p>'+
		'<p>Ü Y wenn du ein Wort gestern schon gesehen hast.</p><p>DrÜcke N, wenn du ein Wort gestern noch nicht gesehen hast.</p>',
		choices: ['Los!']
	};
	timeline.push(recognition_instruction_trial);

	// recognition task with own internal timeline (recognition trial + fixation)
	var recognition_timeline = {
    timeline_variables: words_recognition,
    randomize_order: true,
    timeline: [fixation_trial, recognition_trial]	
	}	
	timeline.push(recognition_timeline)

	// end trial
	var end_trial = {
		type: 'html-button-response',
		stimulus: '<p>Vielen Dank! Ende des Experiments!</p>',
		choices: ['Ok']
	};
	timeline.push(end_trial);
   


	///////////////////////////////////////////////////////
	// start experiment

	// starts playing the timeline
	jsPsych.init({
		timeline: timeline,
		on_finish: function() {jsPsych.data.displayData('csv');},					// displays data at the end
	});

  
</script>

</html>